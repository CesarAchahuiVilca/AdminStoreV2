<div class="animated fadeIn">
  <div class="row">
    <div class="col-lg-4" style="padding-right: 0px;">
      <div class="card">
          <div class="card-body" style="padding: 0px; display: flex; flex-direction: column; height: 465px;">
            <div class="contenedorlista" style="display: flex; flex-direction: column; align-items: center;">
              <div class="cont-busqueda" >
                 <i class="fa fa-search" style="width: 10%; margin-left: 5px;"></i>  <input type="text" name="busqueda" style="width: 90%; height: 35px;" >
              </div>
              <div class="cont-lista" style="height: 375px; width: 95%;">
                <div *ngFor="let tipoplan of planesService.tipoplanes">
                    <div class="item-lista" (click)="mostrarPlanes(tipoplan)" style="padding-left: 5px; padding-right: 2px; display: flex; flex-direction: row; align-items: center;padding-top:8px;padding-bottom: 5px; ">
                        <label for="">{{tipoplan.tipo}}</label>
                    </div>
                    <div><hr style="margin: 0px !important; padding: 0px !important;"></div>
                </div>                
              </div>

            </div>
          </div>
      </div>
    </div>
    <div class="col-lg-8" style="padding-left: 0px;">
      <div class="card">
          
          <div class="card-body" style="padding: 0px; display: flex; flex-direction: column; min-height: 465px; align-items: center;">
            <br>
            <div style="width: 100%; margin-top: 10px; text-align: center;">
                <strong>{{planesService.tipoPlanSeleccionado.tipo }}</strong>
            </div>
            <div style="width: 100%;">
                <hr>
            </div>          
            <div class="cont-tabla-planes"  style="margin: 15px; width: 80%; text-align: center;">
                <table class="table table-responsive-sm table-striped table-sm">
                    <thead>
                      <tr>
                        <th>Nombre del Plan</th>
                        <th> </th>
                      </tr>
                    </thead>
                    <tbody>
                      
                      <tr *ngFor="let plan of planesService.tipoPlanSeleccionado.planes">
                        <td>{{plan.nombreplan}}</td>
                        <td>
                            <div style="margin-left: 0px; display: flex; flex-direction: row;">
                                
                                <div style="flex-grow: 0;margin-right: 2px;">
                                  <button type="button" class="btn btn-pill btn-block btn-success" style="width: auto; height: 40px;"
                                    (click)="editarPlan(plan)" data-toggle="modal"  data-target="#modalPlan"><i
                                      class="fa fa-edit"></i> Editar</button>
                                </div>
                                <div style="flex-grow: 1;">
                                  <button type="button" class="btn btn-pill btn-block btn-danger" style="width: auto;height: 40px;"
                                    (click)="eliminarPlan(plan)" data-toggle="modal"  data-target="#modalConfirmacion"><i class="fa fa-trash"></i> Eliminar</button>
                                </div>
                                </div>
                        </td>
                      </tr>
                    </tbody>
                  </table> 
            </div>
            
          </div>
      </div>
    </div>
  </div>
</div>


<!--MODAL PLANES-->
<div class="modal fade" id="modalPlan" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true" data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog modal-md" role="document" >
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="titulomodal"><i class="fa fa-list"> </i> {{planesService.tipoPlanSeleccionado.tipo}}</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="btnCerrarModal">
          <i class="fa fa-close"></i>
        </button>
      </div>
      <div class="modal-body" style="overflow-y: auto; max-height: 50% !important;">
        <div class="row">
          <div class="col-lg-12 col-sm-12">
            <h4> Detalles del plan : {{planesService.planSeleccionado.nombreplan}}</h4>
          </div>          

        </div>
        <br>
        <div style="max-height: 400px; overflow: auto; background-color: rgba(216, 240, 212, 0);">
          <div style="display: flex; flex-flow: row wrap; padding-top: 10px;">
            <textarea name="" id="" style="width: 100%;" rows="10" placeholder="Ingrese descripcion detallada del plan..." [(ngModel)]="planesService.planSeleccionado.descripcion"></textarea>
          </div>
        </div>
        <div style="text-align: right;">
          <br>
          <button class="btn btn-success btn-info btn-pill" data-dismiss="modal" (click)="guardarDatosPlan()" style="background-color: rgb(221, 144, 0);color: white;"><i
              class="fa fa-save"></i> Guardar</button>

        </div>
      </div>
    </div>
  </div>
</div>
<button id="btnmodalconfirmacion"></button>

<!--MODAL CONFIRMACION-->
<div class="modal fade" id="modalConfirmacion" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true" data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog modal-md" role="document" >
    <div class="modal-content">
      
      <div class="modal-body" style="overflow-y: auto; max-height: 50% !important;">        
        <div style="max-height: 400px; overflow: auto; background-color: rgba(216, 240, 212, 0);">
          <div style="display: flex; flex-flow: row wrap; padding-top: 10px;">
           Â¿ Esta seguro de Eliminar el plan <strong> {{planesService.planSeleccionado.nombreplan}} </strong> en <strong>{{planesService.tipoPlanSeleccionado.tipo}}</strong>?
          </div>
        </div>
        <div style="text-align: right;">
          <br>
          <button class="btn btn-success  btn-pill" data-dismiss="modal" (click)="procesarEliminarPlan()" ><i
            class="fa fa-save"></i> SI</button>
          <button class="btn btn-danger  btn-pill" data-dismiss="modal" ><i
              class="fa fa-close"></i> NO</button>
        </div>
      </div>
    </div>
  </div>
</div>
