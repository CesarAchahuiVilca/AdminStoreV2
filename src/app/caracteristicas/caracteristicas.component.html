<app-header></app-header>
<app-menu></app-menu>
<div class="app-body">
  <main class="main">
    <app-breadcrumb [migas]="migas"></app-breadcrumb>
    <div class="container-fluid">
      <div class="animated fadeIn">
        <div class="row">
          <div class="col-lg-12">
            <div class="card">
              <div class="card-header">
                <button class="btn btn-md btn-link" type="button" (click)="getCaracteristicas()"><i class="fa fa-align-justify"></i></button>
                &nbsp;CARACTERÍSTICAS
              </div>
              <div class="card-body">
                <div class="row col-form-label">
                  <ng-flash-message></ng-flash-message>
                </div>
                <form form #caracteristicaForm="ngForm" class="card form-horizontal" (ngSubmit)="saveCaracteristica(caracteristicaForm)">
                  <div class="card-header">
                    {{caracteristicaHeader}}
                  </div>
                  <div class="card-body">
                    <input type="hidden" name="_id" #_id="ngModel" [(ngModel)]="caracteristicaService.caracteristicaSelected._id">
                    <div class="form-group row">
                      <label class="col-md-2 col-form-label" for="nombres">Nombre de la Característica</label>
                      <div class="col-md-4">
                        <input class="form-control" id="nombre" type="text" name="nombre" #nombre="ngModel" [(ngModel)]="caracteristicaService.caracteristicaSelected.nombre"
                          required>
                        <div *ngIf="nombre.invalid && (nombre.dirty || nombre.touched)" class="alert alert-danger">
                          <div *ngIf="nombre.errors.required">
                            El nombre de la característica es obligatorio.
                          </div>
                        </div>
                      </div>
                      <label class="col-md-2 col-form-label" for="medida">Unidad de Medida</label>
                      <div class="col-md-4">
                        <input class="form-control" id="medida" type="text" name="medida" #medida="ngModel" [(ngModel)]="caracteristicaService.caracteristicaSelected.medida">
                      </div>
                    </div>
                  </div>
                  <div class="card-footer">
                    <div id="botones" class="col-md-6 col-form-label">
                      <button class="btn btn-md btn-success" type="submit">
                        {{accionBoton}}</button>
                      <button id="limpiar" class="btn btn-md btn-danger" type="button" (click)="resetForm(caracteristicaForm)">Limpiar</button>
                    </div>
                  </div>
                </form>
                <div>
                  <div id="carga" style="width: 100%;text-align: center;">
                    <img src="assets/imagenes/carga.gif"> Cargando Datos
                  </div>
                  <table id="table" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTriggers" class="table table-responsive-sm table-bordered table-striped table-sm">
                    <thead>
                      <tr>
                        <th width="50%">NOMBRE</th>
                        <th width="30%">MEDIDA</th>
                        <th width="10%">EDITAR</th>
                        <th width="10%">ELIMINAR</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let caracteristica of caracteristicaService.caracteristicas; index as i">
                        <td>{{caracteristica.nombre}}</td>
                        <td>{{caracteristica.medida}}</td>
                        <td><button class="btn btn-pill btn-info" type="button" (click)="editarCaracteristica(caracteristica)"><i
                              class="fa fa-edit"></i></button>
                        </td>
                        <td><button class="btn btn-pill btn-danger" type="button" data-toggle="modal" data-target="#modalEliminar"
                            (click)="selectCaracteristica(caracteristica, i)"><i class="fa fa-close"></i></button></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>

<div class="modal fade" id="modalEliminar" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document" style="margin-top: 15%; ">
    <div class="modal-content" style="border:3px solid  rgb(5, 173, 41) !important; background-color: rgb(255, 255, 255);">
      <div class="modal-body">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <i class="fa fa-close"></i>
        </button>
        <br>
        <div style="display: flex; flex-direction: row;">
          <div style="flex-grow: 0; margin-top: auto; margin-bottom: auto; margin-left: 3px;">
            <label>¿Esta seguro de que desea eliminar esta característica?</label>
          </div>
        </div>
        <div id="botones" style="width: 100%; text-align: right;">
          <button class="btn btn-success" data-dismiss="modal" (click)="deleteCaracteristica()"> Si</button>
          <button class="btn btn-danger" data-dismiss="modal"> No</button>
        </div>
      </div>
    </div>
  </div>
</div>